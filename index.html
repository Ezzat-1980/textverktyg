<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Textverktyget.se - Din Allt-i-ett Textanalysator</title>
    <meta name="description" content="Gratis online-verktyg för avancerad textanalys, ordräknare, stavningskontroll, omvandling, rensning, extrahering, sök/ersätt och textgenerering.">
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KBHD5ZT9');</script>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6696113059842943"
         crossorigin="anonymous"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f0f4f8; 
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        .main-content, .tools-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0;
        }
        header {
            text-align: center;
        }
        header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1.2rem;
            color: #4a4a4a; /* JUSTERAD FÖR KONTRAST */
            font-weight: 300;
        }
        .about-section h2, .stats-section h2, .tool-category h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #e0e6ed;
            padding-bottom: 10px;
        }
        .about-section p {
            color: #555;
            margin-bottom: 10px;
            font-size: 1.1rem;
            line-height: 1.7;
        }
        #inputText {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Courier New', monospace;
            resize: vertical;
            background: #fafbfc;
        }
        .textarea-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: flex-end;
        }
        .results-container { 
            margin-top: 20px; 
            padding: 20px; 
            background: #f8f9fa; 
            border-radius: 10px; 
            border-left: 4px solid #667eea; 
        }
        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 15px; 
        }
        .stat-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 12px 15px; 
            background: #f8f9fa; 
            border-radius: 8px; 
            border-left: 4px solid #667eea; 
        }
        .stat-label { 
            font-weight: 500; 
            color: #4a4a4a; /* JUSTERAD FÖR KONTRAST */
        }
        .stat-value { font-weight: bold; color: #2c3e50; font-size: 1.1rem; }
        .tool-buttons { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 10px; 
        }
        .btn-primary, .btn-secondary, .tool-btn { 
            padding: 10px 20px; 
            border: none; 
            border-radius: 8px; 
            font-size: 14px; 
            font-weight: 500; 
            cursor: pointer; 
            transition: all 0.3s ease; 
        }
        .btn-primary { background: #667eea; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .tool-btn { background: #e9ecef; color: #495057; border: 1px solid #ced4da; }
        .tool-btn:hover { background: #667eea; color: white; }
        footer { 
            text-align: center; 
            margin-top: 20px;
            padding: 20px;
        }
        footer p {
             color: #4a4a4a; /* JUSTERAD FÖR KONTRAST */
        }
        .social-share { 
            display: flex; 
            justify-content: center; 
            gap: 15px; 
            margin-top: 20px; 
        }
        .share-btn { 
            padding: 10px 20px; 
            background: #667eea; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
        }
    </style>
</head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KBHD5ZT9"
    height="0" width="0" style="display:none;visibility:hidden" title="Google Tag Manager fallback"></iframe></noscript>

    <div class="container">
        <header class="card">
            <h1>Textverktyget.se</h1>
            <p class="subtitle">Ditt allt-i-ett verktyg för textanalys och manipulation</p>
        </header>

        <section class="about-section card">
            <h2>Välkommen till din digitala textassistent!</h2>
            <p>Textverktyget.se är ett gratis och kraftfullt online-verktyg skapat för alla som arbetar med text. Oavsett om du är student, skribent, utvecklare eller bara vill få snabb koll på en text, finns vi här för att hjälpa till.</p>
        </section>

        <main class="main-content">
            <section class="text-area-section card">
                <div class="textarea-container">
                    <textarea id="inputText" placeholder="Klistra in din text här..." aria-label="Huvudtextfält för inmatning"></textarea>
                </div>
                <div class="textarea-controls">
                    <button id="copyBtn" class="btn-secondary">Kopiera text</button>
                    <button id="undoBtn" class="btn-secondary">Ångra</button>
                    <button id="clearAllBtn" class="btn-primary">Rensa allt</button>
                </div>
                <div id="resultsContainer" class="results-container" style="display:none;">
                    <h3>Resultat</h3>
                    <pre id="resultsContent" aria-live="polite"></pre>
                    <button id="clearResultsBtn" class="btn-secondary" style="margin-top: 10px;">Rensa resultat</button>
                </div>
            </section>

            <section class="stats-section card">
                <h2>Statistik</h2>
                <div class="stats-grid" aria-live="polite">
                    <div class="stat-item"><span class="stat-label">Antal ord:</span> <span id="wordCount" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Antal tecken:</span> <span id="charCount" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Tecken (utan blanksteg):</span> <span id="charCountNoSpaces" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Antal rader:</span> <span id="lineCount" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Antal stycken:</span> <span id="paragraphCount" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Antal meningar:</span> <span id="sentenceCount" class="stat-value">0</span></div>
                    <div class="stat-item"><span class="stat-label">Läsbarhetsindex:</span> <span id="readabilityScore" class="stat-value">-</span></div>
                    <div class="stat-item"><span class="stat-label">Medelordlängd:</span> <span id="avgWordLength" class="stat-value">0</span></div>
                </div>
            </section>
            
            <div class="tools-section">
                <div class="tool-category card">
                    <h2>Rensning & Formatering</h2>
                    <div class="tool-buttons">
                        <button class="tool-btn" data-action="removeExtraSpaces">Ta bort extra mellanslag</button>
                        <button class="tool-btn" data-action="removeEmptyLines">Ta bort tomma rader</button>
                        <button class="tool-btn" data-action="removeDuplicateLines">Ta bort dubblettrader</button>
                    </div>
                </div>

                <div class="tool-category card">
                    <h2>Jämför texter</h2>
                    <div class="comparison-controls">
                        <textarea id="compareText" placeholder="Klistra in den andra texten här..." aria-label="Jämförelsetext"></textarea>
                        <button class="tool-btn" data-action="compareTexts">Jämför nu</button>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 Textverktyget.se - Alla rättigheter förbehållna.</p>
            <div class="social-share">
                <button class="share-btn" data-platform="twitter">Dela på Twitter</button>
                <button class="share-btn" data-platform="facebook">Dela på Facebook</button>
                <button class="share-btn" data-platform="linkedin">Dela på LinkedIn</button>
            </div>
        </footer>
    </div>

    <div id="feedback" class="feedback" role="alert" aria-live="assertive"></div>
    
    <script>
        // Hela din fullständiga Javascript-kod är här
        // Denna kod är förkortad för läsbarhet, den fullständiga koden från föregående versioner ska användas
        function shareOnSocialMedia(platform) { /* ... */ }
        document.addEventListener('DOMContentLoaded', function() {
            // ... all din kod ...
            function compareTexts(text1, text2) {
                if (typeof diff_match_patch === 'undefined') {
                    console.error('Jämförelsebiblioteket kunde inte laddas.');
                    // showFeedback('Jämförelsebiblioteket kunde inte laddas.', 'error');
                    return 'Fel vid laddning av funktion.';
                }
                // ... resten av compareTexts funktionen
            }
            // ... resten av din JS ...
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js" defer></script>
</body>
</html>
<!doctype html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ordräknare & Textanalys på svenska – Gratis | Textverktyget</title>
  <meta name="description" content="Räkna ord, tecken, meningar, stycken, LIX och lästid. Allt sker lokalt i din webbläsare. Ingen lagring.">
  <meta property="og:title" content="Textverktyget – Ordräknare & Textanalys">
  <meta property="og:description" content="Gratis, privat och snabbt. LIX, lästid, export till JSON/CSV.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://textverktyget.se/">
  <meta name="twitter:card" content="summary">
  <link rel="canonical" href="https://textverktyget.se/">
  <style>
    :root { --gap:12px; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", Arial; margin: 0; }
    header { position: sticky; top:0; background:#fff; border-bottom:1px solid #eee; padding:10px 16px; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; }
    .trust { font-size:.9rem; color:#0a0; }
    h1 { margin: 0; }
    textarea { width:100%; min-height:260px; padding:12px; font:14px/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; border:1px solid #ddd; border-radius:10px; }
    .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap: var(--gap); margin-top: var(--gap); }
    .card { border:1px solid #eee; border-radius:12px; padding:12px; }
    .card h3 { margin:0 0 6px; font-size:.95rem; }
    .toolbar { display:flex; flex-wrap:wrap; gap: var(--gap); margin-top: var(--gap); }
    button { padding:8px 10px; border:1px solid #ddd; border-radius:10px; background:#fafafa; cursor:pointer; }
    .sr-only { position:absolute; left:-9999px; }
    @media (prefers-color-scheme: dark){
      body{ background:#0b0b0b; color:#eaeaea }
      header{ background:#0b0b0b; border-color:#222 }
      textarea{ background:#111; color:#eaeaea; border:1px solid #222 }
      .card{ border-color:#222; background:#0f0f0f }
      button{ background:#111; border-color:#222; color:#eaeaea }
      .trust{ color:#8fdd8f }
    }
  </style>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"WebApplication","name":"Textverktyget",
   "url":"https://textverktyget.se/","applicationCategory":"Utilities","operatingSystem":"Web"}
  </script>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Textverktyget</h1>
      <div class="trust" aria-live="polite">Allt kör lokalt i din webbläsare. Ingen text skickas eller lagras.</div>
    </div>
  </header>

  <main class="wrap" role="main">
    <label for="input" class="sr-only">Text att analysera</label>
    <textarea id="input" placeholder="Klistra in eller skriv din text här…"></textarea>

    <section class="grid" aria-label="Resultat">
      <div class="card"><h3>Ord</h3><div id="res-words">0</div></div>
      <div class="card"><h3>Tecken</h3><div id="res-chars">0</div></div>
      <div class="card"><h3>Tecken utan blanksteg</h3><div id="res-chars-ns">0</div></div>
      <div class="card"><h3>Meningar</h3><div id="res-sentences">0</div></div>
      <div class="card"><h3>Stycken</h3><div id="res-paras">0</div></div>
      <div class="card"><h3>Gen. meningslängd</h3><div id="res-avg-sent">0</div></div>
      <div class="card"><h3>LIX</h3><div id="res-lix">0</div></div>
      <div class="card"><h3>Lästid</h3><div id="res-read">0 min</div></div>
    </section>

    <div class="toolbar" role="group" aria-label="Verktyg">
      <button id="btn-copy">Kopiera resultat</button>
      <button id="btn-json">Ladda ned JSON</button>
      <button id="btn-csv">Ladda ned CSV</button>
      <button id="btn-clear">Rensa text</button>
    </div>
  </main>

  <script>
    // ------- Hjälpfunktioner -------
    const $ = (id)=>document.getElementById(id);
    const debounce=(fn,ms=150)=>{let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),ms)}}

    const countWords = (t)=> t.trim().length ? t.trim().split(/\s+/).filter(Boolean).length : 0;
    const countChars = (t)=> t.length;
    const countCharsNoSpace = (t)=> t.replace(/\s/g,'').length;
    const sentences = (t)=> (t.match(/[.!?…]+/g)||[]).length || (t.trim()?1:0);
    const paragraphs = (t)=> t.trim().length ? t.trim().split(/\n{2,}/).length : 0;
    const avgSentenceLen = (w,s)=> s? (w/s).toFixed(1) : 0;
    const lix = (t)=>{
      const w = countWords(t);
      const s = sentences(t) || 1;
      const long = (t.match(/\b[\p{L}]{7,}\b/gu)||[]).length;
      return w? Math.round(w/s + (long*100)/w) : 0;
    };
    const readTimeMin = (w)=> Math.max(1, Math.ceil(w/200)); // 200 ord/min

    function compute(text){
      const w = countWords(text);
      const c = countChars(text);
      const cns = countCharsNoSpace(text);
      const s = sentences(text);
      const p = paragraphs(text);
      const avg = avgSentenceLen(w,s);
      const LIX = lix(text);
      const rt = readTimeMin(w);
      return {words:w, chars:c, chars_no_space:cns, sentences:s, paragraphs:p, avg_sentence:avg, lix:LIX, read_minutes:rt};
    }

    function render(r){
      $('res-words').textContent = r.words;
      $('res-chars').textContent = r.chars;
      $('res-chars-ns').textContent = r.chars_no_space;
      $('res-sentences').textContent = r.sentences;
      $('res-paras').textContent = r.paragraphs;
      $('res-avg-sent').textContent = r.avg_sentence;
      $('res-lix').textContent = r.lix;
      $('res-read').textContent = r.read_minutes + ' min';
    }

    const input = $('input');
    const onChange = ()=> render(compute(input.value));
    input.addEventListener('input', debounce(onChange,150));
    document.addEventListener('DOMContentLoaded', onChange);

    // ------- Export & actions -------
    const toCSV = (obj)=> 'nyckel,värde\n' + Object.entries(obj).map(([k,v])=>`${k},${v}`).join('\n');

    $('btn-copy').addEventListener('click', ()=> {
      const data = compute(input.value);
      navigator.clipboard.writeText(JSON.stringify(data, null, 2));
    });
    $('btn-json').addEventListener('click', ()=> {
      const data = compute(input.value);
      const a=document.createElement('a');
      a.href='data:application/json;charset=utf-8,'+encodeURIComponent(JSON.stringify(data));
      a.download='textverktyget_resultat.json'; a.click();
    });
    $('btn-csv').addEventListener('click', ()=> {
      const data = compute(input.value);
      const a=document.createElement('a');
      a.href='data:text/csv;charset=utf-8,'+encodeURIComponent(toCSV(data));
      a.download='textverktyget_resultat.csv'; a.click();
    });
    $('btn-clear').addEventListener('click', ()=> { input.value=''; onChange(); input.focus(); });
  </script>
</body>
</html>